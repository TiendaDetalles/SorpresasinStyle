
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sorpresas in Style</title>
  <style>
    /* Styles omitted for brevity */
  </style>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-analytics-compat.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // ConfiguraciÃ³n de tu proyecto
      const firebaseConfig = {
        apiKey: "AIzaSyCpHYnWuWp7sb9P-HR6rEMg7fg9Xigl-lA",
        authDomain: "sorpresasinstyle-2664b.firebaseapp.com",
        databaseURL: "https://sorpresasinstyle-2664b-default-rtdb.firebaseio.com",
        projectId: "sorpresasinstyle-2664b",
        storageBucket: "sorpresasinstyle-2664b.firebasestorage.app",
        messagingSenderId: "615713402015",
        appId: "1:615713402015:web:74bcd71e0a22f3815c06aa",
        measurementId: "G-82WQ2NKVLQ"
      };

      // Inicializar Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const database = firebase.database();
      const analytics = firebase.analytics(app);

      // Referencias a la base de datos
      const productosRef = database.ref('productos');
      const carritoRef = database.ref('carrito');
      const logoRef = database.ref('logo');

      // Escuchar cambios en productos
      productosRef.on('value', (snapshot) => {
        productos = snapshot.val() || [];
        actualizarVista();
      });

      // Eliminar producto de la base de datos
      function eliminarProducto(index) {
        productos.splice(index, 1);
        productosRef.set(productos);
        actualizarVista(); // AsegÃºrate de actualizar la vista despuÃ©s de eliminar
      }

      function actualizarVista() {
        productosContainer.innerHTML = '';
        productosAgregados.innerHTML = '';
        actualizarBotonesCategorias();

        const productosFiltrados = categoriaSeleccionada === "todas"
          ? productos
          : productos.filter(p => p.categoria === categoriaSeleccionada);

        productosFiltrados.forEach((producto, index) => {
          const tarjeta = `
            <div class="producto-tarjeta">
              <img src="${producto.imagen}" class="producto-imagen">
              <div class="producto-nombre">${producto.nombre}</div>
              <div class="producto-precio">$${producto.precio}</div>
              <div class="producto-categoria">${producto.categoria}</div>
              <button class="producto-boton" onclick="agregarAlCarrito(${index})">ðŸ›’</button>
            </div>`;
          productosContainer.innerHTML += tarjeta;
        });

        productos.forEach((producto, index) => {
          productosAgregados.innerHTML += `
            <div class="producto-tarjeta">
              <img src="${producto.imagen}" class="producto-imagen">
              <input class="input-edit" type="text" value="${producto.nombre}" onchange="editarProducto(${index}, 'nombre', this.value)">
              <input class="input-edit" type="number" value="${producto.precio}" onchange="editarProducto(${index}, 'precio', this.value)">
              <input class="input-edit" type="text" value="${producto.categoria}" onchange="editarProducto(${index}, 'categoria', this.value)">
              <input class="input-edit" type="file" accept="image/*" onchange="editarImagen(${index}, this)">
              <button class="admin-button" onclick="eliminarProducto(${index})">Eliminar</button>
            </div>`;
        });
      }

      // Other functions omitted for brevity
    });
  </script>
</head>
<body>
  <!-- Body content omitted for brevity -->
</body>
</html>
